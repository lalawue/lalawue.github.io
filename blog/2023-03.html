<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8">
    <title>Sucha's Blog - Archive for March, 2023</title>
    <meta name="generator" content="MarkdownProjectCompositor.lua">
    <meta name="author" content="Sucha">
    <meta name="keywords" content="suchang, programming, Linux, Lua">
    <meta name="description" content="Sucha's blog">
    <link rel="shortcut icon" href="../images/ico.png">
    <link rel="stylesheet" type="text/css" href="../styles/blog.css">
    <link rel="stylesheet" type="text/css" href="../styles/prism.min.css">
    <style id="site_theme"></style>
  </head>
  <body>
    <div id="body">
      <div id="text">
	   <!-- Page published by cmark-gfm begins here --><h1>Sucha's Blog ~ Archive for March, 2023</h1>
<p><a id="p1"></a></p>
<div class="date">23年3月4日 周六 21:34</div>
<h2>WSL2 under Win11 22H2</h2>
<p>玩起了 Win11，搞的是 Ubuntu-18.04 LTS，其实 Ubuntu 的版本对我来说不是那么重要，之所以选 18.04 因为其他虚拟机上面用的也是这个版本，而不同版本的 glibc 库不同，会导致同一个程序编译后在其他虚拟机上面跑不了，为了避免这个麻烦，就都用同一套吧，要升级就一起升级。</p>
<p>另外 WSL2 不再依赖系统功能里面的 Linux 子系统组件，而是提供了一个<a href="https://link.zhihu.com/?target=https%3A//github.com/microsoft/WSL/releases">单独的更新包</a>，这个 URL 是固定的，下载后更新，可以解决 WSL 下面固定 IP 地址的难题。</p>
<p>安装完成后，WSL 版本是 1.0 以上，比如我的：</p>
<pre><code class="language-sh">&gt; wsl --version
WSL 版本： 1.1.3.0
...
</code></pre>
<p>首先建立一个虚拟交换机：</p>
<ul>
<li>Win-S 打开搜索面板，搜索 Hyper-V 管理器，点击并打开右侧的虚拟交换机管理器</li>
<li>右侧建立一个绑定到物理设备的虚拟交换机，比如可以用无线网卡绑定一个 WSLBridge</li>
<li>注意不要操作已有的 WSL 虚拟交换机，那个是原来的</li>
</ul>
<p>我们刚创建的 WSLBridge 虚拟交换机，分配地址是外部物理网络的 DHCP，接着我们指定 Ubuntu-18.04 使用刚建立的虚拟交换机做桥接设备，Powershell 下面在用户目录下（%USERPROFILE%目录下）创建 .wslconfig，内容是下面</p>
<pre><code class="language-sh">[wsl2]
networkingMode=bridged # 桥接模式
vmSwitch=WSLBridge # 你想使用的网卡
ipv6=true # 启用 IPv6
</code></pre>
<p>这样 Ubuntu-18.04 虚拟机的 IP 地址就固定了（由外部路由分配）。</p>
<p>访问 WSL 上的 Ubuntu 18.04 还挺方便，文件管理器地址栏上面输入 <code>\\wsl$</code> 就能访问 Linux 系统的 <code>\</code> 目录，可太方便了。</p>
<p>虽然我的是家庭版 Win11 22H2，但并不妨碍我使用 WSL，之前网上找的一个脚本，保存内容为 xx.cmd 并以管理员权限运行，就能获得 WSL 的能力。</p>
<pre><code class="language-bash">pushd &quot;%~dp0&quot;
dir /b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txt
for /f %%i in ('findstr /i . hyper-v.txt 2^&gt;nul') do dism /online /norestart /add-package:&quot;%SystemRoot%\servicing\Packages\%%i&quot;
del hyper-v.txt
Dism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL
</code></pre>
<p>不过我后面改成从 github 上下载更新了，去掉了 Windows 系统功能里面的 Linux 子系统的钩，不知道这个还有没有影响。</p>
<p>不管了，先玩着吧，😊</p>
<div class="category"><a href="CategoryLinux.html">CategoryLinux</a> / <a href="2023-03.html#p1">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>
<p><a id="p0"></a></p>
<div class="date">23年3月4日 周六 20:12</div>
<h2>再读《三体》</h2>
<p>记得应该是大学的时候读过三体的黑暗森林，第一第二部吧，反正我不记得程心，但实际读完后，程心出场到后面的好多内容，也是相当震撼的。</p>
<p>最震撼的应该是 “只送大脑” 了。</p>
<p>这个伏笔要到挺后面才揭开，不过虽然大脑很努力，也无法解救重重迷雾中的人类，该吃吃、该喝喝、该打打、该沙沙，其实吧，对于掌握了二向箔的其他文明来说，人类这段时间的发展其实是很有限的。</p>
<p>宇宙何其广大，我们也仅仅是穷其一生来了解它，有时候掌握的规律，不只是救人的灵丹妙药，更是歼敌的致命武器，四维空间的泡泡是这样的，远看毫无威胁的二向箔也是的。</p>
<p>而暴露行踪的曲率引擎，希望有生之年能够飞出太阳系吧，😁</p>
<div class="category"><a href="CategoryReading.html">CategoryReading</a> / <a href="2023-03.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>
<!-- Page published by cmark-gfm ends here -->
  <div id="foot">2004-<script>var d = new
	Date();document.write(d.getFullYear())</script> &copy;
	Sucha. Powered by MarkdownProjectCompositor.
  </div>
  </div><!-- text -->
  <div id="sidebar">
  </div><!-- sidebar -->
  <script src="../js/prism.min.js" async="async"></script>
  <script src="../js/blog_sidebar.js"></script>
  </div> <!-- body -->
</body>
</html>