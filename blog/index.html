<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=0.5">
    <title>Sucha's Blog - Welcome</title>
    <meta name="generator" content="MarkdownProjectCompositor.lua" />
    <meta name="author" content="Sucha" />
    <meta name="keywords" content="suchang, programming, Linux, Lua" />
    <meta name="description" content="Sucha's blog" />
    <link rel="shortcut icon" href="../images/ico.png" />
    <link rel="stylesheet" type="text/css" href="../styles/blog.css" />
    <link rel="stylesheet" type="text/css" href="../styles/prism.min.css" />
  </head>
  <body>
    <div id="body">
      <div id="text">
	   <!-- Page published by cmark-gfm begins here --><h1>Sucha's Blog ~ Welcome</h1><div class="date">22年9月18日 周日 10:22</div>
<h2>Android 开机时长</h2>
<p>我就说手头的这台一加 7 Pro，为啥开个微信小程序，都有可能导致微信崩溃，另外就是偶尔有些莫名其妙的小问题，也许是待机时长超过 3 年的 855 有些老迈了吧。</p>
<p><img src="https://tva1.sinaimg.cn/orj360/6f6cc1c0gy1h6aiwiwaqkj21402eogmv.jpg" alt="" /></p>
<div class="category"><a href="CategoryMisc.html">CategoryMisc</a> / <a href="2022-09.html#p4">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年9月17日 周六 20:56</div>
<h2>中秋返乡黄码风波</h2>
<p>在返工的动车上了，有些经历当成日记，记录一下吧。</p>
<p>像我这种返乡没能3天2检导致[团圆月饼]的情况，社区网格管理人员对于扭转成[绿丝带]，有决定权。</p>
<p>我9号到家，按照自治区文件，需要做足7天核酸。算上9号，到15号就7天了，但管我的认为，14号刚检查了一次，要隔一天，最后一次16号检查才好。</p>
<p>16号要不是我家人到社区催他，鬼知道什么时候过来核酸。</p>
<p>16号下午不到4点，二医院出结果了，也是阴性，我把结果微信给他，他说马上提交，但一直等到17号早上还是[团圆月饼]。我wx问了一下，他说帮问一下，然后没消息了。我的车票是买了又退。</p>
<p>17号早上我挺着急的了，距离最后一次检查核酸阴性，到现在快一天了未能[绿丝带]，让我对整个[团圆月饼]扭转为[绿丝带]的上报链很不信任。</p>
<p>但我也知道，像我这样从外地返乡，又没有按流程报备，到社区cao着普通话跟街道办的人对线，天生理亏，人家2、3句话就把我打发了（不好意思，本地话最大）。</p>
<p>同样17号早上，sz那边问我具体情况，我就说了当前位置，最近几次核酸检测结果，以及桂康码状态。她说把我在sz挂白名单，避免黄码之类的吧。</p>
<p>我也知道我现在粤康码[绿丝带]，只是标记了7天未检测核酸。这个状态在sz不正常，但在一些类似的粤西4线城市，谁说一定要在7天内检查一次核酸呢。就想着要不到gd检测一下核酸，到gd地坐车返深算了。</p>
<p>于是回拨sz那边的电话，就这个操作咨询了一下。她跟我解释了gd这边，跟湖南、四川的健康码互认，如果核酸阴性，符合转[绿丝带]条件，一天内就能转了。对于我这种想着在gd核酸转[绿丝带]的情况，没有否认，当然也不保证这样一定行。</p>
<p>我的求生欲望迫切，在sz，上地铁要48h核酸，像我这种不是因为接触风险导致的[团圆月饼]，3天2检就给你转[绿丝带]了。</p>
<p>想好后跟家人说了一下，查了一下线路，玉湛高速到廉江人民医院14x公里，我压着120，一个多小时就到了，就算是6个小时出结果，我返回玉林睡一个晚上，第二天周日18号到湛江坐高铁就能返深。当然，如果玉林这边的结果出来更早，那更好。</p>
<p>有了保底的方案，加上我家人也觉得街道那边转[绿丝带]的流程太磨叽了，他们就过去吵，问到底什么时候能转[绿丝带]。街道的人就推系统问题，上报不了自治区，再给一个半小时吧。我家人又吵，你们说是系统问题，那出一个纸质的说明吧。你们转不了[绿丝带]，gd可以转。</p>
<p>也没提具体方案，街道办的人就慌了。为什么这么说呢，因为我家离街道办走路不到5分钟，回家坐下来还没开始吃午饭，我的桂康码就转[绿丝带]了，神奇不神奇。</p>
<p>谁预计得到，网络突然就顺畅了，资料突然就能推上自治区的系统了。敢情是管我的一直不放在心上，拖着不提交吧。</p>
<p>可是，人家管我的街道网格员就有这样的权力。</p>
<hr />
<ul>
<li>我想过如果自己到街道办对线，转[绿丝带]机会渺茫才有这个想法</li>
<li>粤桂健康码不互认，才留下了这样的理论操作空间</li>
<li>如果在sz后3天2检一直阴性保持[绿丝带]，然后桂康码又还保持着[团圆月饼]，理论变成现实，就问[doge]不[doge]</li>
</ul>
<hr />
<p>感觉高风险区、中风险区导致的[新鲜好柿][团圆月饼]管理，以及区域行政命令导致的[团圆月饼]管理，不是一回事，后者是交给街道办处管理的，街道办对于[团圆月饼]转[绿丝带]的管理，有决定权。</p>
<p>我是千不该万不该回家没报备，然后又没3天2检导致激活了自治区的[团圆月饼]大礼。</p>
<p>如果支线剧情结果是[团圆月饼][绿丝带]共存，一半冰水一半火焰，我甚至有想过春节咋办，算不算彻底得罪了街道办管我这种异省返乡的。到时候，我是早早哈哈报备呢，还是掐着表不到3天就溜。</p>
<p>纪念一下2022的[团圆月饼]节，想想 mission impossible、亡命天涯就觉得有那味儿，可惜没能激活支线剧情。</p>
<p>太长写了至少 3 个站[裂开]</p>
<div class="category"><a href="CategoryLife.html">CategoryLife</a> / <a href="2022-09.html#p3">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年9月8日 周四 21:42</div>
<h2>SSK 2.5 寸硬盘盒</h2>
<p>最近连续买的第二个 SSK 2.5 寸硬盘盒了，在 15 年前的笔记本硬盘上，还能有顺序写 70M/s 的速度，真的太可以了。</p>
<p>买的第一个，用来给黑苹果做急救盘了，也蛮简单的，白条进度显示之前，CMD+R 进入恢复模式，抹盘，并安装苹果系统到 SSD 就行，
如果之前有安装过 GRUB，需要先在 Mac 系统用 diskutil 做 EFI 分区的清理。</p>
<p>话说在买这个 SSK 硬盘盒之前，买了另外一个联想的硬盘盒，当时做活动不到 20 块，就买了，工业设计要比 SSK 的好，感觉外壳的用料质量是可以的，
但是最重要的，联想的硬盘盒，主控不行，我手头一个笔记本硬盘，一个 120G 的 SSD，都跑不起来，我也不知道为啥。</p>
<p>然后想着会不会是主控不行，买了 SSK，这款在淘宝上的销量其实挺大的，没想到，真的是联想的硬盘盒主控不行，至少到现在为止是这样，有时候不能贪便宜。</p>
<p><img src="https://tva1.sinaimg.cn/orj360/6f6cc1c0gy1h5zj1812goj22bc334n5l.jpg" alt="" /></p>
<p>最后提一下，其实 SSK 的 USB 3.0 硬盘盒也不贵，才 23 块，😑</p>
<div class="category"><a href="CategoryMisc.html">CategoryMisc</a> / <a href="2022-09.html#p2">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年9月02日 周四 22:23</div>
<h2>使用 HTML5、增加 Discussions</h2>
<p>站点虽小，建站时间却很长了，当时还没有 HTML5 标准，用的是 XHTML 的标准。</p>
<p>现在 HTML5 就是事实上的标准，大行其道，没必要坚守原来的 XHTML 标准了。实际上，就改了文件头的声明而已，其他一点都不用动。</p>
<p>另外在 site 侧边栏，以及每条 blog 的底部，增加了 discussion 的入口，链接到的是 github 免费 discussions 功能。</p>
<p>本站就建立在 github pages 上，不用白不用。</p>
<p>白嫖的事情，谁不喜欢呢～</p>
<div class="category"><a href="CategoryThisSite.html">CategoryThisSite</a> / <a href="2022-09.html#p1">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年9月01日 周四 23:59</div>
<h2>更新部分 CSS</h2>
<p>更新了首页、blog、以及 site 其他 categories 的 CSS，改成居中显示，限制最大宽度，其实就是更迎合手机的浏览。</p>
<p>因为之前的 flex 布局，在手机上面显示其实还好，但如果显示器宽度太宽的话，就铺开得有点难受。</p>
<p>CSS 文件应该有超过 10 年没有更新了，改的也不多，我也不大懂怎么改，反正改完 Chrome 上看着就还好。</p>
<p>先这样用着吧。</p>
<div class="category"><a href="CategoryThisSite.html">CategoryThisSite</a> / <a href="2022-09.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年8月23日 周二 22:57</div>
<h2>支持 HTTPS 域名</h2>
<p>本站域名服务商是 <a href="https://name.com">Name.com</a>，托管在 <a href="https://pages.github.com/">GitHub Pages</a>，使用很久了（没错，大于 9 年！）。</p>
<p>之前是不支持 HTTPS 域名的，原因是 github pages 需要域名服务商提供某些东西才支持，所以我其实是简单使用了 CNAME 文件 标明了域名而已。所以这个 https 的支持，是 github 单方面的感觉，要么就是 name.com 给提供上了。</p>
<p>看了一下证书信任链，是 R3 (Let's Encrypt) 签发的，反正证书签发我是不用管的。</p>
<p>记得最早的时候，一个账号只能有一个 github pages 站点，现在应该是每个 repo 都支持了吧。</p>
<p>之所以有这个感慨，其实是看了 github 上某位开发者的个人站点，用的自然是自己买的域名，但是却不舍得搞正式的 HTTPS 证书（完整的信任链），那位大佬的 star 数量，在3k 左右，数量不算多，原因是开源的都是 Swift 的代码，用的人相对少一些吧。</p>
<p>不打算透露这位大佬的更多信息了，感慨一下罢了。</p>
<div class="category"><a href="CategoryThisSite.html">CategoryThisSite</a> / <a href="2022-08.html#p1">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年8月2日 周二 22:23</div>
<h2>买了个 4K 显示器</h2>
<p>前一阵子买了一个 4K 显示器，之前的 1080P 是用了快 10 年 DELL。</p>
<p>国产的友达屏幕，27 寸，1300 尼特，支持 HDR400，价格嘛，某东活动，不到 1.3K，香得很。黑苹果上面可以配置为高动态范围，
显示器这边把 HDR 打开，然后用 DP1.2 的线，能支持到 10bit 的色深。</p>
<p>话说 4K 的显示效果要比 1080 好太多了，之前在黑苹果上面字体模糊的，现在字体显示很锐利，还有之前保存了不少 1080 视频的，
在新屏幕上面看，效果打折了哈哈。</p>
<p>另外对比了 V 站的电影（1080 SDR 吧，大部分是这个），以及 B 站的 1080 高码率，B 站的好太多了，反正没有那种动作稍微快一点就
果冻的感觉，另外 B 站在 Chrome 上面能够打开 4K，效果也能感觉比 1080 高码率还要好。</p>
<p>在 Mac 的 Safari 上面，B 站的视频可以支持到 8K，不过 8K 的源太少了，我是没有感觉出来跟 4K 的差异，对比之下，4K 和 1080 差异还挺大的，当然 1080 高码率会好一些。</p>
<p>我尝试下载一些 4K 的视频，太大了，一部电影十几 G 收不住。如果是 1080 高码率的话，大概几个 G 吧，2、3 个小时的也就 5、6 G，对于我是能够接受的，然后分辨率在这个屏幕上面，感觉也很好。</p>
<p>另外也能看出苹果原生的播放器，跟 VLC 的差异，哈哈哈，就是这么神奇。</p>
<p>就像一位同学说的，只怪自己上 4K 显示屏太晚了，4K 太香了。</p>
<div class="category"><a href="CategoryLife.html">CategoryLife</a> / <a href="2022-08.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年7月17日 周日 11:44</div>
<h2>修改 SeedDMS 镜像上传文档大小限制</h2>
<p>这里主要涉及到修改容器内部文件，以及将其保存为一个本地的修改镜像。另外，baidu 可以知道，SeedDMS 对于上传文档的限制，需要修改 php.ini。</p>
<p>我们先去容器看下文件具体在哪里：</p>
<pre><code class="language-bash">$ docker exec -it seeddms /bin/bash
root@c31cfcd7168f:/# cd /
root@c31cfcd7168f:/# find . -name &quot;php.ini&quot;
./usr/local/etc/php/php.ini
root@c31cfcd7168f:/# exit
$ docker cp seeddms:/usr/local/etc/php/php.ini  php.ini
</code></pre>
<p>然后还是 baidu，看下需要修改 php.ini 的哪些配置：</p>
<ul>
<li>memory_limit 内存设置限制</li>
<li>max_execution_time 程序执行时间限制</li>
<li>post_max_size 最大POST数据限制</li>
<li>upload_max_filesize 最大上传文件大小限制</li>
</ul>
<p>对于手头的这个镜像，只需要修改后面 3 个就好了</p>
<ul>
<li>max_execution_time = 60</li>
<li>post_max_size = 0</li>
<li>upload_max_filesize = 300M</li>
</ul>
<p>然后将其拷贝回容器，并保存这个修改后的容器为镜像</p>
<pre><code class="language-bash">$ docker cp php.ini seeddms:/usr/local/etc/php/php.ini
$ docker commit seeddms my_seeddms
</code></pre>
<p>停止之前的容器，使用新的镜像运行</p>
<pre><code class="language-bash">$ docker stop seeddms
$ docker rm seeddms
$ docker run --name seeddms \
-d \
--restart=always \
-v /HOST/data:/var/www/seeddms/data \
-v /HOST/conf:/var/www/seeddms/conf \
-v /HOST/ext:/var/www/seeddms/www/ext \
-p 80:80 my_seeddms
</code></pre>
<p>这样就行了。</p>
<div class="category"><a href="CategoryLinux.html">CategoryLinux</a> / <a href="2022-07.html#p1">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年7月16日 周六 16:31</div>
<h2>配置 SeedDMS</h2>
<p>先说一个悲伤的故事，之前在百度网盘上面存了不少书籍，包括技术书籍以及小说等等，然后是用 QQ 账号登陆的，后来不记得是登陆后要绑定手机号还是干嘛，绑定完了之后，好多书都不见了！</p>
<p>也许我之前的手机号注册过了吧，然后导致账号合并了之类的，真的搞不懂。当时我是非常后悔没有做备份，因为之前网盘有做活动，永久 2T，怪不得 2T 永远用不完！</p>
<p>就想着搞一个文档管理系统，比如<a href="https://medevel.com/dms-cloud-file-sharing-opensource/?continueFlag=bf311ba190bf0d160b5d3461e092f0f4">这篇文章介绍的</a>。</p>
<p>因为是个人使用，运行在类似 NAS 一样的小机器上，可以的话，就不需要跑起来类似 MySQL 或者 PostgreSQL 这样的 DB 了。实话说，是真的用不上牛刀。</p>
<p>于是试了一下 <a href="https://www.seeddms.org/">SeedDMS</a>，PHP 搭建的，可以只用 SQLite。</p>
<p>后来才发现，我这一个前端开发，搞不懂 PHP 的安装，apache/nginx/openresty 难不倒我，但是 php 的安装难倒我了，你说有个 index.php 可是先要运行起来才能安装，但网站可不是那么简单就能运行的，先搞懂 pear 目录，简写意思是 <a href="https://pear.php.net/">PHP Extension Application Repository</a>，然后呢，请使用 <a href="https://getcomposer.org/">Composer</a>，谢谢～</p>
<p>我这的魔怔了，无比怀念 go build 可以指定导出不同平台的 binary，然后配置问题不就是 YAML 或者 JSON 搞定，再说，我如果没有提供配置文件，就不能使用 default config running 吗，笑了。</p>
<p>于是就回到了其他的路子上，不再考虑自己源码安装了。试了几个 github 上别人提供的 docker 镜像，最后选了<a href="https://github.com/eraelpeha/docker-seeddms">eraelpeha/docker-seeddms</a></p>
<pre><code class="language-bash">$ docker pull eraelpeha/seeddms
$ docker run --name seeddms -p 8080:80 eraelpeha/seeddms
</code></pre>
<p>浏览器访问一下服务端的 8080 端口，应该可以看到提示了，然后就可以通过 8080/install 安装了。</p>
<p>因为后续网站配置，文档啥的还是要保存在 docker 容器之外的目录，所以先 docker cp 容器里面的配置文件出来，待会再挂载本地 volume 上去：</p>
<pre><code class="language-bash">$ docker cp seeddms:/var/www/seeddms/data /HOST/data
$ docker cp seeddms:/var/www/seeddms/conf /HOST/conf
$ docker cp seeddms:/var/www/seeddms/www/ext /HOST/ext
$ chmod -R 777 /HOST/data /HOST/conf /HOST/ext
</code></pre>
<p>上面也将 data 目录配置到外面了。</p>
<p>使用 docker ps -a 查看运行的 image，stop 后，rm 掉，再运行一下看看，这里配置为启动 background 加载了，然后设置为 80 端口</p>
<pre><code class="language-bash">$ docker run --name seeddms \
-d \
--restart=always \
-v /HOST/data:/var/www/seeddms/data \
-v /HOST/conf:/var/www/seeddms/conf \
-v /HOST/ext:/var/www/seeddms/www/ext \
-p 80:80 eraelpeha/seeddms
</code></pre>
<p>最后，设置 docker 开机启动吧</p>
<pre><code class="language-bash">$ systemctl start docker
</code></pre>
<p>重启后，发现文档服务起来了，之前的设置也都还有效，这样就配置完了。</p>
<p>搞了一个下午，就感觉 php 太坑了，跟 go 的起步差了十万八千里。</p>
<div class="category"><a href="CategoryLinux.html">CategoryLinux</a> / <a href="2022-07.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年6月26日 周日 15:02</div>
<h2>MoocHelper 更新到 0.2.16</h2>
<p>昨天说到 <a href="https://github.com/Tencent/LuaHelper">LuaHelper</a> 已经更新到了 0.2.16，今天我也同步将 <a href="https://github.com/lalawue/MoocHelper">MoocHelper</a> 更新上去了，主要的改动有</p>
<ul>
<li>当方法里local与self同名时，self指向正确的table</li>
</ul>
<p>例子是</p>
<pre><code class="language-lua">local foo = {}

function foo:test()
    local foo = {}
    self:bar()
end

function foo:bar()
end
</code></pre>
<p>之前当 hover 到 test() 函数中的 self:bar() 时，self 其实指向的是函数内的 local variable foo，而实际 Lua 语义是指向运行当前 function 的 table，毕竟 self 是作为当前 function 第一个参数传递进来的。</p>
<p>moocscript 的处理还特别一点，因为其 class/struct 是通过拼凑 AssignStat 来实现的，这种 <code>:</code> 函数在 class/struct 里面其实是实例函数，语法跟 Lua 不一样，没有 table name 前缀，得特别处理一下。</p>
<p>这里的特别处理是，需要在当前 AST 的位置，一直寻找 parent scope 到最近的 class scope，如果存在，拿到外层 local variable map 的同名变量定义（如上面例子的 <code>foo</code>），将变量定义的 Loc 作为 self 的 varStruct 描述，后面这个 Loc 的逻辑跟 Lua 侧是一样的。</p>
<p>大概这样吧。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="2022-06.html#p2">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">22年6月25日 周六 22:30</div>
<h2>MoocHelper 更新到 0.2.15</h2>
<p>这个其实也是 5 月份的事情，之前也说过，因为一直都有用 <a href="https://github.com/lalawue/mooncake">MoonCake</a>，自然就少不了
LSP 的支持。</p>
<p>这次是同步了 <a href="https://github.com/Tencent/LuaHelper">LuaHelper</a> 的更新，自己这边添加了另外一些功能，比如对于非工程路径的支持，
hover 到 require 库时，可以寻找过去，另外就是函数内部的 local 变量，我是默认不展示在 outline 的，我觉得这些变量太烦了。</p>
<p>另外刚看到 upstream 已经到了 0.2.16 了，等我后面有空再同步一下吧。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="2022-06.html#p1">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>
<!-- Page published by cmark-gfm ends here -->
  <div id="foot">2004-<script>var d = new
	Date();document.write(d.getFullYear())</script> &copy;
	Sucha. Powered by MarkdownProjectCompositor.
  </div>
  </div><!-- text -->
  <div id="sidebar">
  </div><!-- sidebar -->
  <script src="../js/blog_sidebar.js" async="async"></script>
  <script src="../js/prism.min.js" async="async"></script>
  </div> <!-- body -->
</body>
</html>