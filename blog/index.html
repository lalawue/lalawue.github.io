<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN">
  <head>
    <title>Sucha's Blog - index</title>
    <meta name="generator" content="MarkdownProjectCompositor.lua" />
    <meta http-equiv="Content-Type" content=" text/html; charset=utf-8" />
    <meta name="author" content="Sucha" />
    <meta name="keywords" content="suchang, programming, GNU, Linux, Emacs, elisp" />
    <meta name="description" content="Sucha's blog" />
    <link rev="made" href="mailto:suchaaa@gmail.com" />
    <link rel="shortcut icon" href="../images/ico.png" />
    <link rel="stylesheet" type="text/css" href="../styles/blog.css" />
    <!--[if lte IE 6]><link rel="stylesheet" type="text/css" href="../styles/ie.css" /><![endif]-->
  </head>
  <body>
    <div id="body">
      <div id="text">
	<!-- Page published by cmark-gfm begins here --><h1>Sucha's Blog ~ Welcome</h1>
<p><a id="p1"></a></p>
<div class="date">18年6月10日 周一 22:26</div>
<h2>MarkdownProjectCompositor</h2>
<p>这里介绍一下 <a href="https://github.com/lalawue/MarkdownProjectCompositor">MarkdownProjectCompositor</a> 对源文件的组织方式、处理流程，以及一些针对 Markdown 语法的扩展功能，最后说一下配置细节。</p>
<h3>源文件组织方式</h3>
<p>可以参考配置文件<sup><a href="#fnc1">1</a></sup>，定义了源文件目录、生成目录，同时定义了多个源文件子目录为 proj 工程目录，每个 proj 工程目录可以自定义不同 proj prepare 函数，每个源文件的 body 预处理函数、header 及 footer 样式。</p>
<p>这样可以有效处理主页源码、以及博客源码，处理各自不同的扩展语法，在 compostor 这一层，关注流程及数据传递，具体的扩展功能，是通过配置文件中复杂的功能函数来实现的。</p>
<p>在 proj 这一层，主要是获取子目录下的所有文件，交给 prepare 函数动态插入、删除文件，为接下来内容的动态生成做准备。</p>
<h3>处理流程</h3>
<p>每个 Markdown 文件的 rendering 过程，被分为 4 个阶段，分别是 body 预处理生成中间文件，输出 header、中间文件 rendering、输出 footer 后组成生成文件。</p>
<p><strong>1. body 源码预处理</strong></p>
<p>首先读取 Markdown 的源文件内容，将其作为参数传递给配置文件中某个 proj 定义的 body 函数做预处理，在这里用户可以处理自定义的标签，将其转为各种 Markdown rendering engine 支持的标准格式后，将内容交给 compositor 写入中间文件。</p>
<p><strong>2. header 生成文件头</strong></p>
<p>可以在这里区分不同的 proj，插入不同内容的文件头，比如主页的，博客的文件头，带上不同的样式表，同样支持动态生成内容。</p>
<p><strong>3. rendering 中间文件</strong></p>
<p>使用配置的 markdown rendering engine 处理这个中间文件，将生成内容添加到生成文件中。</p>
<p><strong>4. footer 生成文件尾</strong></p>
<p>这里类似 header 函数。</p>
<h3>语法扩展</h3>
<p>其实<a href="../blog/2019-06.html#p0">上篇博文</a>的最后有介绍，这里介绍语法，注意为了不被解析，用了 \</p>
<ul>
<li>支持工程间的引用</li>
</ul>
<pre lang="source"><code>[这篇文章]\(blog\#2019-06\#p1)
</code></pre>
<ul>
<li>生成文件内标题深度为 4 的目录摘要，例子是 <a href="../slack/SlackBook.html">Slackware Linux Essentials</a> 的本页目录</li>
</ul>
<pre lang="source"><code>\#\content 4
</code></pre>
<ul>
<li>支持 footnote，看本文最后的配置文件标注</li>
</ul>
<pre lang="source"><code>这里有个标注[Desc]\(#fn1)
...
[Desc]\(#fn1)：解释这个标注
</code></pre>
<ul>
<li>博客 proj 里面良好的 HTML 标题结构、date、category 语法，这些是</li>
</ul>
<pre lang="source"><code> #date 18年6月10日 周一 22:26
 #category Programming
</code></pre>
<ul>
<li>博客 proj 里动态生成 WelcomePage、Category 页面内容<br />
无法举例了，&gt;_&lt;</li>
</ul>
<h3>配置、使用细节</h3>
<p>配置文件会使用 lua 的 dofile() 函数加载，返回类似的 table 就好，所以配置文件可以非常复杂，大大扩展 Markdown 语法。</p>
<p>使用方法如下，可选参数 PROJ_BASE_DIR，当 confg.lua 中的 source、build 配置为相对路径时可以使用，如果有跨平台写 Markdown 同学，应该需要这个吧。</p>
<pre lang="source"><code>$ lua MarkdownProjectCompositor.lua config.lua [PROJ_BASE_DIR]
</code></pre>
<p>基本的配置下面有，注意 proj 中含有 res = true 的，意味着仅仅列举文件，但不做生成，用于上述扩展语法中做 proj 间的引用。</p>
<p>prepare 函数上面有介绍，当 proj 的 files 被填充后，会跑一次；body 用于生成临时源文件，自定义的语法在这里做转换，其他函数都有介绍过了。</p>
<p>最后的 user 不是必须的，但如果扩展了语法之类的，那可能就需要用到了，在 config 中带上，后面确保可以引用到。</p>
<p>最后的最后，当然是用生成当前主页、及博客的 <a href="https://github.com/lalawue/homepage/blob/master/misc/config.lua">config.lua</a> 来压轴。</p>
<p><sup>[<a id="fnc1">1</a>]</sup> config example:</p>
<pre lang="source"><code>local config = {
   source = &quot;/Markdown/Source/Path&quot;, -- will be modified by compositor
   bulid = &quot;/Html/Output/Path&quot;,      -- will be modified by compositor
   suffix = &quot;.html&quot;,                 -- output suffix
   program = &quot;cmark-gfm&quot;,            -- program used
   params = &quot; -t html --unsafe --github-pre-lang &quot;,    -- params
   tmpfile = &quot;/tmp/MarkdownProjectCompositorTempFile&quot;, -- temp file
   projs = {
      {
         res = true,      -- resouces dir, when true do not build output
         dir = &quot;SourceSubPath&quot;,
         files = {
            -- file names filled by compositor
         },
         prepare = function( config, proj )
            -- prepare proj, sort/insert/delete proj files to be processed by cmark
         end,
         body = function( config, proj, filename, content )
            -- return modified source content before cmark process
         end,
         header = function( config, porj, filename )
            -- return content append in dest head
         end,
         footer = function( config, proj, filename )
            -- return content append in dest tail
         end,
      },
   },
   -- user defines below
   user = {
      readFile = function( path )
      end,
      writeFile = function( path, content )
      end,
      siteHeader = function( config, proj, filename )
      end,
      siteFooter = function( config, proj, filename )
      end,
   },
}
return config
</code></pre>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="index.html#p1">Permalink</a></div>
<p><a id="p0"></a></p>
<div class="date">18年6月09日 周日 23:59</div>
<h2>更换 Markdown Engine 为 cmark-gfm</h2>
<p>将本地 Markdown 渲染引擎换成了 <a href="https://github.com/github/cmark-gfm">cmark-gfm</a>，在这个基础上建立了类 EmacsWikiMode 的工程生成工具
<a href="https://github.com/lalawue/MarkdownProjectCompositor">MarkdownProjectCompositor</a>。</p>
<p>之前这个主页包括博客，是 2004 年底因为好奇 Wiki 语法而搭建起来的本地 HTML 文件，后来又学会了使用 FTP 上传免费的空间，绑定二级域名。</p>
<p>接着又学会了如何买域名，大学时代迷恋 Unix、Linux、Emacs 等等这一切对于普通人来说奇奇怪怪的东西，除了头脑发热在学校 BBS 上各种水文，
还在这里分门别类做了记录，慢慢的东西就多起来了。</p>
<p>这十多年间，不变的是，我得使用 Emacs 作为一个所见所得的编辑器，通过
<a href="https://github.com/lalawue/emacs-wiki-mode">EmacsWikiMode</a> 来写 Markdown，
为此自己在这个 mode 之上建立了 <a href="https://github.com/lalawue/emacs-wiki-journal">EmacsWikiJournal</a> 来专门写博客，基本上，
<a href="../scratch/EmacsWiki.html">这个过程还是很方便的</a>。</p>
<p>Markdown 最初的语法，都来自于 JOHN GRUBER 在 2004 年的
<a href="https://daringfireball.net/projects/markdown/syntax">Markdown: Syntax</a>。</p>
<p>因为 EmacsWikiMode 引用得早吧，所以在此之上，构建了很多独特的功能，比如自动生成目录摘要，比如将 Markdown 组织为各个工程，使用不同的配置文件头、
文件尾来生成 HTML，这样不同目录下的 HTML 可以使用不同的 CSS。而且，不同工程之间还可以很方便的引用。以及各种语法的高亮，将其输出为 HTML 文件。</p>
<p>也是蛮早，我就想着将博客的文件按照 YYYY-MM 这样组织，可以经受时间推移的考验，可是没想到，最大的不确定性，来自于 Emacs 的支持。</p>
<p>一方面，EmacsWikiMode 早就年久失修，maintainer 在 N 年以前，就构建了一个叫做 muse 的工程另起炉灶了。而 Emacs 社区本身，转到了 OrgMode 这一条路上
面，再说，其实一直都有 OutlineMode 可以用，也还勉勉强强。</p>
<p>加上外面各种 Markdown 桌面软件，网页端工具提供方便的界面，EmacsWikiMode 早就没有人用了，而我自己使用的频次也是越拉越少。</p>
<p>可悲的是，随着 Emacs 版本更新，大概在 version 24 的时候，EmacsWikiMode 在使用上就各种问题，version 25 之后，几乎无法生成了。</p>
<p>虽然是低频使用，但考虑到需要很长时间的支持，emacs-lisp 这种语言就得花费很多时间去维护，其作为 Emacs 环境编程工具，功能接口变动较大，
如果是 C 等等语言、库变动少的，基本上靠着 POSIX Like 的系统接口，维护成本可以很低。当然效率是另外一方面的加分吧。</p>
<p>所以，替换 Markdown 的 renderinig engine，随着 Emacs 上 EmacsWikiMode 的可用性变得迫切起来，最终来了这次大改。</p>
<p>因为之前 EmacsWikiMode 功能丰富，加上自救对于 cmark 还不熟悉，所以功能上有取舍。另外之前为了在上面构建 EmacsWikiJournal，其实在 HTML 文件结构上
面，以及 Markdown 的语法上面，都有一些不妥的地方，这里一并修改过来了。</p>
<p>先说一些缺失的：</p>
<ul>
<li>不再支持生成 table 了，原来的 table 都是从 HTML 层面拷贝过来的</li>
<li>没有区分各种语言的语法高亮了<sup><a href="#fn1">1</a></sup></li>
<li>博客没有侧边栏的 calendar 了</li>
</ul>
<p>一些依旧支持，并做了改进的：</p>
<ul>
<li>支持工程间的引用</li>
<li>支持生成目录摘要</li>
<li>支持 footnote</li>
<li>博客里面良好的 HTML 标题结构、date、category 语法<sup><a href="#fn2">2</a></sup></li>
<li>动态生成 WelcomePage、Category 内容</li>
</ul>
<p><sup>[<a id="fn1">1</a>]</sup> <a href="../images/elisp_highlight_syntax.jpg">emacs-lisp 语法高亮图</a><br />
<sup>[<a id="fn2">2</a>]</sup> <a href="../images/md_cmark_syntax.jpg">新的博客结构</a></p>
<div class="category"><a href="CategoryThisSite.html">CategoryThisSite</a> / <a href="index.html#p0">Permalink</a></div>
<p><a id="p0"></a></p>
<div class="date">18年11月17日 周六 14:35</div>
<h2>河西走廊</h2>
<p>上个月忙工作焦头烂额，月底结束才稍微空闲。</p>
<p>之前在微信订阅号阅读晚清沧海事，有了解到左宗棠收复新疆的一些信息，加上去
年有去北疆玩，在乌鲁木齐、吐鲁番遇见的种种，心里有些疑问，就在平时阅读时，
稍加关注相关的文章。</p>
<p>加上自己更早时候有从兰州火车敦煌、之后再从张掖汽车穿越祁连山到西宁的经历，
对那边的风土人情还有不少记忆，前一阵不记得是看到哪里的推荐，高分河西走廊
这部纪录片，心中种了草，就在平时上班路上看了起来。</p>
<p>十集不多，断断续续看完了，前面信息略紧凑，后续晚清至现代的信息其实很少，
不过没关系，这些信息后续我可以慢慢补全。</p>
<p>说到左宗棠收复新疆是在晚清，但是在更早时候，中原对于西域就有认识，记得小
时候就有看过小人书，了解到张骞出塞这个故事。</p>
<p>那可是在公元前，距今 2000 多年，当时匈奴猖獗，屡屡侵犯中原，烧杀抢掠。汉
武帝想联合西域的大月氏一起对付匈奴，张骞领命，踏上路途。</p>
<p>要联系大月氏，就要经过河西走廊，就是现在的武威、张掖、敦煌，现在是无法想
象当时路途的艰辛。因为这块区域被匈奴控制，张骞路途被匈奴抓去扣为人质好
多年，后来找到机会继续西进，只带了随从，连匈奴老婆都不敢通知。</p>
<p>到了大月氏，才发现大月氏其实也被匈奴赶到了另外一片区域，且他们对于联合围
攻匈奴没有想法。张骞在大月氏呆了一年多，在返回长安的途中，又被匈奴抓住。
命好在匈奴单于驾崩的时候，趁乱出走，这次带着匈奴老婆回到了长安。</p>
<p>匈奴仍然屡屡侵犯中原，汉武帝时期国力也慢慢强盛，于是有了驱赶匈奴的打算，
其中最重要的，就是控制河西走廊。</p>
<p>得益于当时的名将霍去病的高光表现，汉武帝收复了河西走廊，并设立了敦煌、张
掖、武威三郡，这些都是汉朝的地名。后续仍然继续扩张，进而控制了新疆，设立
西域都护府这样一个军事机构管理这片区域。</p>
<p>在当时，新疆还是各种游牧部落，生产力低下，汉朝在西域设立治理机构，其实带
去了更为先进的生产技术、管理经验。打通了河西走廊后，西域商人可以安全、顺
利的往来中原通商贸易，一睹当时的超级大都市长安。</p>
<p>从西域到长安通商贸易的人越来越多，丝绸之路就是这么来的。当时的罗布泊还是
波光粼粼，楼兰城是丝绸之路的咽喉。</p>
<p>后来随着中原王朝的更替，丝绸之路也随着繁华、沉寂，大概就是这样。</p>
<p>记得去年在吐鲁番，还想着要不要去一下鄯善（古楼兰）的，后来犹豫了一阵，当
天下午 3 点就回到了乌鲁木齐，还是北疆好玩。</p>
<div class="category"><a href="CategoryReading.html">CategoryReading</a> / <a href="index.html#p0">Permalink</a></div>
<p><a id="p0"></a></p>
<div class="date">18年9月23日 周日 15:55</div>
<h2>山竹和 NHL 比赛</h2>
<p>没想到第一次看 NHL 比赛是在现场，体育馆里里外外感觉有一半都是外国人；比
赛相当激烈，场面火爆，也许带着厚重防具的原因吧，动作都很大，有那么一两次
双方对峙裁判介入才消停；攻防转换极快，换人就那么翻过围栏 N 上 N 下，都不
用停表的；技术犯规要关小黑屋罚时间，枫叶国火焰队有一次两人被关小黑屋，三
防五那个被动。</p>
<p>还有比赛中打着打着杆子就飞了是真的，过了好一阵裁判才看到捡起送回去了，这
杆子应该不便宜。</p>
<p>夏天在冰凉的室内看这个是蛮爽的，虽然买的是偏僻的山顶票，因为人不多，留中
间风景好的地方去了；入场出场在地铁站还有摆渡车接送其实没有很麻烦。</p>
<p>那天阳光明媚，是深圳几周以来难得的好天气。只是第二天台风过境，横扫了这一
切。</p>
<p><a href="https://weibo.com/tv/v/GAATlaWND?fid=1034:4287216193624511">Video Link</a></p>
<div class="category"><a href="CategoryLife.html">CategoryLife</a> / <a href="index.html#p0">Permalink</a></div>
<p><a id="p1"></a></p>
<div class="date">18年6月24日 周日 10:53</div>
<h2>Timer、FastLZ &amp; Erasure Codec</h2>
<p>上次说到<a href="../blog/2017-09.html#p0">网络库的 timer</a>，总觉得直接塞入网络库不是个好主意，一方面不是所有
的程序都需要 timer 来协助，另外一方面 timer 用途其实更广泛，可以放到更底
层的逻辑里。</p>
<p>实际是将其实现在 <a href="https://github.com/lalawue/m_foundation/blob/master/src/model/m_timer.h">m_foundation</a> 里了，接口提供创建多个 timer 序列，往具体
某个序列加入 timer 及其回调的时候，保证有序，这样每次 update timer 列表，
可以直接检查排在最前面的 timer 是否超时，不需要检查全部；另外，如果到期
时间冲突，解决的办法是开链表，同个到期时间的 timer 可以都排在一起。</p>
<p>保证有序的方案算法是使用 skiplist，时间复杂度为 O(log2n)。</p>
<p>另外，虽然是 timer，但实际设计是不考虑时间单位的，时间单位都由外面提供，
外部在 update timer 时，同时更新最新的时间单位就好；使用了 64bit 来表示
时间单位，表达空间应该足够了。</p>
<p><a href="https://github.com/ariya/FastLZ">FastLZ</a> 是个有很长时间未更新的库，这里的压缩，将其放在了 <a href="https://github.com/lalawue/m_tunnel">m_tunnel</a> 这一层，
与 <a href="https://github.com/xtaci/kcptun">kcptun</a> 不同。主要是看到了 snappy 用的 C++，包含太多文件，效果未必必
FastLZ 好多少，因为数据量少，CPU 耗费也不大，所以就没有采用。</p>
<p>其实后来还看到更好的 <a href="https://github.com/lz4/lz4">lz4</a>，没有更换的原因是，实际跑起来，大部分都是 HTTPS，
这些压缩其实绝大部分用不上。</p>
<p>FastLZ 最少需要使用 66 byte，感觉放在 UDP 长度 14xx 的 playout 里，太浪
费了，是没有放到 <a href="https://github.com/lalawue/m_kcptun">m_kcptun</a> 的考虑之一。</p>
<p>还有另外一点是，不能压缩的数据在跑 compress 的时候，返回的长度要比实际来
源更长，这个时候可以果断抛弃不压缩，在 m_tunnel 协议里，有命令字可以区分
这段 data 是否需要解压，这样对协议双方来说，至少有一方可以少走一次
decompress 了，而传输数据量可以保证最少。</p>
<p>粗看了一下，lz4 没有说压缩时最少需要多少字节，以及 dest buffer 需要比src
大多少，貌似需要探测，这点不如 FastLZ；另外，snappy 及 lz4 的解压速度是
亮点，但实际上对于数据量少的，没啥影响；就 CPU 耗费以及压缩率来看，折衷
方案更好的是 <a href="https://github.com/facebook/zstd">zstd</a>，可这个不是单线程的，代码量复杂度都会上去太多，不好管
理。</p>
<p>Erasure Codec 用的是 Reed-Solomon，当然不是最新最先进几乎触摸到香浓极限
的算法。本来找到一个可用的，但是太耗 CPU 了，最后是找到一个使用 Cauthy
码的 <a href="https://github.com/catid/cm256">cm256</a>，网络上传输太不确定，TCP 仅保证了传输次序，内容校验有限，如果
上层发现数据错误，要么抛错误，要么重新传输，后者意味着又得重新发一次数据，
以及来回的时间耗费，不够经济。</p>
<p>另外，如果链路上一定会发生错误，就需要 Erasure Codec 了，要不会一直失败。
最后是使用了 payload 较高的 RS(11, 2)，接近经典的 RS(239, 16)，由于协议
本身也需要保证，因此 Erasure Codec 放到了最底层，UDP 之上直接装载。</p>
<p>多个协议下来，UDP 14xx 实际可以使用的数据量，payload 就更少了，也是没办
法。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="index.html#p1">Permalink</a></div>
<p><a id="p0"></a></p>
<div class="date">18年6月9日 周六 00:58</div>
<h2>老笔记本换 CMOS 电池 &amp; Nexus 7 换 USB 尾插</h2>
<p>这台笔记本是工作还不到半年，信用卡下来之后，透支买的，那块 CMOS 电池到现
在已经撑过了 10 年。最开始是作为开发用的机器，后来慢慢淡出，最后是安装了
Linux 变成不常开机的服务器。</p>
<p>最近是烦了那开机后必响的 BB，琢磨着应该是电池的问题，淘宝 ¥15 了一排
CR2032，百度了一下 BIOS 电池的位置，当然是开腔才能具体位置，换了之后其实
还是会响，需要重新设置一下 BIOS 时间才行。</p>
<p>Neus 7 是 12 年的一代，当时是因为分辨率才下定了觉醒，这个价格这个分辨率
是可以的，因为是给家里人用，电量变得越来越不济，后面干脆是 mini USB 口接
触不良，充不上电了。</p>
<p>同样是淘宝，同样是 ¥15，只是 Nexus 7 不好打开外壳，费了一点劲；还有就是
螺丝都太小了，华强北 ¥25 的小工具盒太勉强，当然最后还是换了。</p>
<div class="category"><a href="CategoryMisc.html">CategoryMisc</a> / <a href="index.html#p0">Permalink</a></div>
<p><a id="p0"></a></p>
<div class="date">18年5月1日 周二 22:30</div>
<h2>m_dnscnt 和 lua-web</h2>
<p>前一阵子写了一个 <a href="https://github.com/lalawue/m_dnscnt">m_dnscnt</a>，一个并发多个 DNS 请求的客户端、库接口。</p>
<p>有这个需求的原因，在于系统提供的 DNS 请求是一个同步接口，开始请求后，得
等着 DNS 结束才能走下一步。</p>
<p>这带来两个问题，第一个问题是，如果我同时有 3 个 DNS 请求，总共花费的时间，
是这 3 个请求加起来的总和；第二个问题是，因为底层的网络库是异步的，不能
因为 DNS 请求是同步的，就将整个循环给阻塞住，因此实际是多开了线程才能用
好这个 DNS 请求接口，也因此多了一个 STM 同步操作。</p>
<p>并发、异步的 DNS 请求库，则没有这个问题。</p>
<p>当我将 <a href="https://github.com/lalawue/m_dnscnt">m_dnscnt</a> 以源代码接口的形式用到了 <a href="https://github.com/lalawue/m_tunnel">m_tunnel</a> 上去后，感觉服务端 DNS
请求加快了不少，毕竟之前得一个一个顺序请求 DNS，现在则是同时请求多个，总
的花费时间大大缩短了。</p>
<p>另外呢，也将这 DNS 以库的形式用到了 <a href="https://github.com/lalawue/lua-web">lua-web</a> 上去。以库的形式加入 lua-web
的原因是，<a href="https://github.com/lalawue/m_net">m_net</a> 本身已经用库的方式提供了 Lua 绑定，无法在同一个库里面暴
露接口给 <a href="https://github.com/lalawue/m_dnscnt">m_dnscnt</a> 使用。所以 lua-web 底层使用了两份 m_net 代码，其中一个是
单独用于 DNS 请求的。</p>
<p>这样 lua-web 就支持了 HTTP request，之前不支持域名，只支持 IP，现在则没
有这个问题了。</p>
<p>而在架构上，HTTP 层的支持算是完整了，如果以 web-framework 的要求看的话，
后续还需要 HTML 的支持。如果还需要加上一点，那就是 HTTPS 的支持，以及
websocket。HTTP/2 呢，就算了，那完全是另外一个东西。</p>
<p>还有，这些个东西，往后再说吧，目前的目标，并不是做一个 production-ready
的东东，而只是做一个类似教学用的工具，做个小巧，但五脏六腑清晰明了，可以
一眼看穿，但又确实可用的东西。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="index.html#p0">Permalink</a></div>
<p><a id="p3"></a></p>
<div class="date">18年3月30日 周五 23:49</div>
<h2>换回 suchang.net</h2>
<p>再次换回 <a href="http://suchang.net">suchang.net</a>。</p>
<div class="category"><a href="CategoryThisSite.html">CategoryThisSite</a> / <a href="index.html#p3">Permalink</a></div>
<p><a id="p2"></a></p>
<div class="date">18年3月19日 周一 01:06</div>
<h2>True Life</h2>
<p>前几天在推上看到这个新闻蛮惊讶的，当时看的是<a href="https://www.npr.org/sections/goatsandsoda/2018/03/01/589519475/computer-teacher-with-no-computers-chalks-up-clever-classroom-plan">英文来源</a>，里面的信息跟
<a href="https://m.huanqiu.com/r/MV8wXzExNjQzMjM5XzE1NTRfMTUyMDI5NzgyMA==?pc_url=http%3A%2F%2Flx.huanqiu.com%2Flxnews%2F2018-03%2F11643239.html">中文报道</a>有很大的不同。</p>
<p>想起二十多年前听到信息高速公路时是完全不理解，十多年前开始慢慢接受电脑进
入普通生活，改善工作效率的同时，也开始沉迷虚拟游戏中的各种。</p>
<p>可是现在呢，微博、微信、抖音、视频，各种虚拟场景占据了一天中那么多时间后，
也许网络中过得好不好要比被微信、工作IM撕裂的所谓现实生活更重要吧。</p>
<p>自从微信变成工作IM，特别是各种下班后，以及类似今年情人节那样被硬生生被拉
到一个微信群里解决bug到晚上九点多，我也终于理解自己不喜欢微信的原因。</p>
<p>还好家人都爱打电话，再说家人的微信群我也不爱看，根本都不回，打字太累了，
就像这篇打了大概有2个小时。</p>
<p>所以，看到这篇新闻后先是惊讶，对照自己的生活后觉得羡慕，也知道再也不可能
回退到，如新闻中加纳人的史前生活。​​​​</p>
<div class="category"><a href="CategoryReading.html">CategoryReading</a> / <a href="index.html#p2">Permalink</a></div>
<p><a id="p1"></a></p>
<div class="date">18年3月5日 周一 00:06</div>
<h2>m_net 支持 FreeBSD</h2>
<p>使用家里旧电脑配件新搭了一台 FreeBSD 后，开始跑程序，因为 FreeBSD 在网络
接口层面跟 MacOS 是很相似的，同样是 kqueue，所以修改比较小，只需要新开一
个宏定义，包起来的区域跟 MacOS 一样就行。</p>
<p>在这个基础上 <a href="https://github.com/lalawue/m_net">m_net</a> 开始支持 FreeBSD 了，同样的 <a href="https://github.com/lalawue/m_tunnel">m_tunnel</a>、<a href="https://github.com/lalawue/m_kcptun">m_kcptun</a> 也开始
支持 FreeBSD 了。</p>
<p>其实不用修改啥，想着其实还不如支持大端需要修改的东西多，可是目前没有平台
跑大端，所以这个想法等实际需要后再说吧。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="index.html#p1">Permalink</a></div>
<p><a id="p0"></a></p>
<div class="date">18年3月4日 周日 23:53</div>
<h2>开始接触 FreeBSD</h2>
<p>过年在家发现了两台旧电脑，是之前给家人安装新电脑后，各种拆装后剩下的，清
点了一下，CPU 是 I3 2300 之类的，主板华擎，内存 4G DDR3，这个配置感觉还
是可以的，MicroATX 架构，就想着不如搬到深圳，搭一台 FreeBSD 学习一下。</p>
<p>还带上了大学时就开始服役的 80G 希捷硬盘，由于是 IDE 口，这个硬盘没条件在
家测试了，其他部件包括电源，正常跑起了 BIOS。</p>
<p>到深圳后，只需要淘宝一个不带电源支持 MicroATX 的小机箱，大概 70 块这样，
因为忘记电源线，因此多破费了 20 块，不到 100 机器就可以跑起来了，感觉还
可以。</p>
<p>计划之外的是，那个 80G IDE 接上了淘宝的 IDE 转 SATA 小板，还是没法使用；
还好手头有一个 320G 的 USB 移动硬盘，说是用来备份的移动硬盘，可是很少使
用，年龄也很大了，10 年买的。</p>
<p>于是拆了硬盘盒，欣喜地看到了 SATA 口，愉快接上吧。</p>
<p>FreeBSD 的安装很傻瓜，我唯一不理解的是分区，貌似不能像我在 Linux 那样
给 home 单独分区，这样随便我折腾系统都没关系了。</p>
<p>pkg install 用起来也很溜，开了 samba 后，同样可以当成一台备份服务器，就
是速度要比用 USB 口传输慢了许多，好处是之前的 USB 口其实接触很不稳定，经
常跑不起来，所以其实我也不太想用这个备份的移动硬盘。</p>
<div class="category"><a href="CategoryLinux.html">CategoryLinux</a> / <a href="index.html#p0">Permalink</a></div>
<!-- Page published by cmark-gfm ends here -->
<div id="foot">2004-<script language="javascript">var d = new
	Date();document.write(d.getFullYear())</script> &copy;
	Sucha. Powered by MarkdownProjectCompositor.
</div>
</div><!-- sidebar -->
  <div id="sidebar">
      <p class="header">Here</p>
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="index.html">Front</a></li>
        <li><a href="../scratch/ThisSite.html">This Site</a></li>
        <li><a href="../live/AboutMe.html">About Me</a></li>
        <li><a href="../cs/EmacsWikiJournal.html">Emacs Wiki Journal</a></li>
      </ul>

      <p class="header">Search</p><!-- Bing Search -->
      <form id="searchform" method="get" action="http://cn.bing.com/search" >
	<p><input id="searchtext" type="text" name="q" value="" /></p>
	<p><input type="hidden" name="ie" value="utf-8" /></p>
	<p><input type="hidden" name="oe" value="utf-8" /></p>
	<p><input type="hidden" name="hl" value="zh-CN" /></p>
	<p><input type="hidden" name="domains" value="suchang.net" /></p>
	<p><input name="si" type="hidden" value="suchang.net" /></p>
	<p><input type="hidden" name="sitesearch" value="suchang.net" /></p>
      </form>

      <p class="header">Contact</p>
        <ul>
          <li><a href="mailto:suchaaa@gmail.com">Mail me</a></li>
        </ul>

      <p class="header">Categories</p>

      <ul>
        <li><a href="CategoryLinux.html">GNU/Linux</a></li>
        <li><a href="CategoryProgramming.html">Programming</a></li>
        <li><a href="CategoryLife.html">Life &#38; essay</a></li>
        <li><a href="CategoryReading.html">Reading</a></li>
	<li><a href="CategoryThisSite.html">This Site</a></li>
        <li><a href="CategoryMisc.html">Misc</a></li>
      </ul>

      <p class="header">Links</p>
      <ul>
      <li><a href="http://blog.csdn.net/g9yuayon/">G9</a></li>
        <li><a href="http://mrjamie.cc/">Jamie</a></li>
        <li><a href="http://www.ftchinese.com/column/007000002">朝九晚五</a></li>
        <li><a href="http://blog.codingnow.com/">CloudWu</a></li>
        <li><a href="http://ditu.google.cn/maps?hl=zh-CN&ll=22.626687,110.186691&spn=0.101883,0.15398&t=h&brcurrent=3,0x36adc425dfd47083:0xd77004f2b5f175d6,0,0x36adb6981be5ba57:0xbb22df1016a0dd2e%3B5,0,0&z=13">Yulin in Google Maps</a></li>
      </ul>

      <p class="header">Archives</p><div class="archive_links"><ul><li><a href="2019-06.html">June 2019</a></li><li><a href="2018-11.html">November 2018</a></li><li><a href="2018-09.html">September 2018</a></li><li><a href="2018-06.html">June 2018</a></li><li><a href="2018-05.html">May 2018</a></li><li><a href="2018-03.html">March 2018</a></li><li><a href="2018-01.html">January 2018</a></li><li><a href="2017-12.html">December 2017</a></li><li><a href="2017-09.html">September 2017</a></li><li><a href="2017-08.html">August 2017</a></li><li><a href="2017-06.html">June 2017</a></li><li><a href="2017-05.html">May 2017</a></li><li><a href="2017-04.html">April 2017</a></li><li><a href="2017-03.html">March 2017</a></li><li><a href="2017-02.html">February 2017</a></li><li><a href="2016-10.html">October 2016</a></li><li><a href="2016-05.html">May 2016</a></li><li><a href="2016-01.html">January 2016</a></li><li><a href="2015-12.html">December 2015</a></li><li><a href="2015-11.html">November 2015</a></li><li><a href="2015-10.html">October 2015</a></li><li><a href="2015-09.html">September 2015</a></li><li><a href="2015-08.html">August 2015</a></li><li><a href="2015-07.html">July 2015</a></li><li><a href="2015-06.html">June 2015</a></li><li><a href="2015-05.html">May 2015</a></li><li><a href="2015-03.html">March 2015</a></li><li><a href="2015-02.html">February 2015</a></li><li><a href="2015-01.html">January 2015</a></li><li><a href="2014-12.html">December 2014</a></li><li><a href="2014-05.html">May 2014</a></li><li><a href="2014-04.html">April 2014</a></li><li><a href="2014-03.html">March 2014</a></li><li><a href="2014-02.html">February 2014</a></li><li><a href="2014-01.html">January 2014</a></li><li><a href="2013-12.html">December 2013</a></li><li><a href="2013-11.html">November 2013</a></li><li><a href="2013-10.html">October 2013</a></li><li><a href="2013-09.html">September 2013</a></li><li><a href="2013-08.html">August 2013</a></li><li><a href="2013-07.html">July 2013</a></li><li><a href="2013-06.html">June 2013</a></li><li><a href="2013-05.html">May 2013</a></li><li><a href="2013-04.html">April 2013</a></li><li><a href="2013-03.html">March 2013</a></li><li><a href="2013-02.html">February 2013</a></li><li><a href="2013-01.html">January 2013</a></li><li><a href="2012-12.html">December 2012</a></li><li><a href="2012-11.html">November 2012</a></li><li><a href="2012-10.html">October 2012</a></li><li><a href="2012-08.html">August 2012</a></li><li><a href="2012-07.html">July 2012</a></li><li><a href="2012-06.html">June 2012</a></li><li><a href="2012-05.html">May 2012</a></li><li><a href="2012-04.html">April 2012</a></li><li><a href="2012-03.html">March 2012</a></li><li><a href="2012-02.html">February 2012</a></li><li><a href="2012-01.html">January 2012</a></li><li><a href="2011-12.html">December 2011</a></li><li><a href="2011-11.html">November 2011</a></li><li><a href="2011-10.html">October 2011</a></li><li><a href="2011-09.html">September 2011</a></li><li><a href="2011-08.html">August 2011</a></li><li><a href="2011-04.html">April 2011</a></li><li><a href="2011-02.html">February 2011</a></li><li><a href="2011-01.html">January 2011</a></li><li><a href="2010-12.html">December 2010</a></li><li><a href="2010-11.html">November 2010</a></li><li><a href="2010-09.html">September 2010</a></li><li><a href="2009-07.html">July 2009</a></li><li><a href="2009-06.html">June 2009</a></li><li><a href="2009-05.html">May 2009</a></li><li><a href="2009-04.html">April 2009</a></li><li><a href="2009-02.html">February 2009</a></li><li><a href="2009-01.html">January 2009</a></li><li><a href="2008-12.html">December 2008</a></li><li><a href="2008-11.html">November 2008</a></li><li><a href="2008-10.html">October 2008</a></li><li><a href="2008-09.html">September 2008</a></li><li><a href="2008-08.html">August 2008</a></li><li><a href="2008-07.html">July 2008</a></li><li><a href="2008-06.html">June 2008</a></li><li><a href="2008-05.html">May 2008</a></li><li><a href="2008-04.html">April 2008</a></li><li><a href="2008-03.html">March 2008</a></li><li><a href="2008-02.html">February 2008</a></li><li><a href="2008-01.html">January 2008</a></li><li><a href="2007-10.html">October 2007</a></li><li><a href="2007-07.html">July 2007</a></li><li><a href="2007-06.html">June 2007</a></li><li><a href="2007-05.html">May 2007</a></li><li><a href="2007-04.html">April 2007</a></li><li><a href="2007-03.html">March 2007</a></li><li><a href="2007-02.html">February 2007</a></li><li><a href="2007-01.html">January 2007</a></li><li><a href="2006-12.html">December 2006</a></li><li><a href="2006-11.html">November 2006</a></li><li><a href="2006-10.html">October 2006</a></li><li><a href="2006-09.html">September 2006</a></li><li><a href="2006-08.html">August 2006</a></li><li><a href="2006-07.html">July 2006</a></li><li><a href="2006-06.html">June 2006</a></li><li><a href="2006-05.html">May 2006</a></li><li><a href="2006-04.html">April 2006</a></li><li><a href="2006-03.html">March 2006</a></li><li><a href="2006-02.html">February 2006</a></li><li><a href="2006-01.html">January 2006</a></li><li><a href="2005-12.html">December 2005</a></li><li><a href="2005-11.html">November 2005</a></li><li><a href="2005-10.html">October 2005</a></li><li><a href="2005-09.html">September 2005</a></li><li><a href="2005-08.html">August 2005</a></li><li><a href="2005-07.html">July 2005</a></li><li><a href="2005-06.html">June 2005</a></li><li><a href="2005-05.html">May 2005</a></li><li><a href="2005-04.html">April 2005</a></li><li><a href="2005-03.html">March 2005</a></li><li><a href="2005-02.html">February 2005</a></li><li><a href="2005-01.html">January 2005</a></li><li><a href="2004-12.html">December 2004</a></li><li><a href="2004-11.html">November 2004</a></li><li><a href="2004-10.html">October 2004</a></li><li><a href="2004-09.html">September 2004</a></li></ul></div></div><!-- sidebar -->
   </div> <!-- body -->
  </body>
</html>