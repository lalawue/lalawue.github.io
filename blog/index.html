<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8">
    <title>Sucha's Blog - Welcome</title>
    <meta name="generator" content="MarkdownProjectCompositor.lua">
    <meta name="author" content="Sucha">
    <meta name="keywords" content="suchang, programming, Linux, Lua">
    <meta name="description" content="Sucha's blog">
    <link rel="shortcut icon" href="../images/ico.png">
    <link rel="stylesheet" type="text/css" href="../styles/blog.css">
    <link rel="stylesheet" type="text/css" href="../styles/prism.min.css">
    <style id="site_theme"></style>
  </head>
  <body>
    <div id="body">
      <div id="text">
	   <!-- Page published by cmark-gfm begins here --><h1>Sucha's Blog ~ Welcome</h1><div class="date">23年7月08日 周六 22:17</div>
<h2>OTP 研究</h2>
<p>学习了一下 OTP 这个东西，比如用的是 <a href="https://github.com/OTPLibraries/LuaOTP">LuaOTP</a>。</p>
<p>区分为 OTP、TOTP、HOTP 这三种，OTP 英文展开为 One Time Password，是服务端对客户端的一次性密码，属于双因素验证的范畴。</p>
<p>TOTP 这里，公式中的一个参与计算的因子是时间，比如这个时间因子，可以 30 秒更新一次，那这个一次性密码，也是 30 秒更新一次。</p>
<p>HOTP 有一个 counter 的概念，每次用过后都会变化，每次都生成新的，对应的是该一次性密码的使用次数。</p>
<p>上述 LuaOTP 支持 Google Authenticator，浏览器 JS 这边用的是<a href="https://www.runoob.com/w3cnote/javascript-qrcodejs-library.html">菜鸟教程</a>介绍的<a href="https://github.com/davidshimjs/qrcodejs">qrcodejs</a>，用来生成二维码图片。</p>
<p>当然也可以不生成图片，而是导出字符串，Google Authenticator 也同样支持字符串导入。</p>
<p>之前不大理解这一套，搞了一下，发现也没有那么难。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="2023-07.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年6月24日 周六 23:36</div>
<h2>cincau 支持多进程模型</h2>
<p>自从 <a href="https://github.com/lalawue/m_net">mnet</a> 在 Mac/Linux 下支持了多进程模型，<a href="https://github.com/lalawue/cincau">cincau</a> 也支持上了。</p>
<p>luajit 会检测是否增加了多进程的配置，如果有多进程的配置，将创建了一个控制面用的 UDP。然后 monitor 根据 worker 的存活数量，fork() 足够数量的 process。</p>
<p>控制面之所以选用 UDP 而不是 TCP，是因为 UDP 是按帧发送的，不需要再做一层协议的解析，系统内也不存在丢帧，只要发送的数量不多就没啥问题，缺点是一帧的数据长度有限。</p>
<p>另外，monitor 通过 fork() 拿到了 worker pid 后，需要将 pid 传递给调用的 luajit 做记录。而 worker 在被 fork() 后，需要往 monitor 控制面的 UDP port 发送数据，传递自己的 port 和 index 的对应关系。</p>
<p>每个 process 都有控制面的 UDP 用来收发内部数据，接口部分是提供了类似 worker index 来指明需要发送到的 worker port。之所以用 worker index，是因为 worker 被重新创建后，绑定 port 是会变化的（配置文件中不需要指明每一个 worker 的 port）。worker index 序号将会从 1 到 worker count，其他的序号代表 monitor。</p>
<p>而且在每个 worker process 内，是不知道其他 worker 的控制面端口的，只能通过 monitor 来转发，monitor 毕竟拥有所有 worker 的 index 和 port 的对应关系。</p>
<p>之所以 monitor 需要占据其他非 worker 的 index，举个例子，比如搜集当前所有 worker 的某项数据。</p>
<p>可以向 worker 1 发送事件，worker 1 接收到后，往 worker 序号为 index + 1 的发送，一直到最后一个 worker 发送给序号 worker count + 1，最后就是 monitor 收到了，你可以认为数据是被不断叠加的，一直到 monitor 收到结果。</p>
<p>这样本轮就搜集完了。如果需要传递收集的结果，monitor 可以广播到所有的 worker ，这样就完成了一个数据的循环。</p>
<p>假若某个 worker 挂掉后，拥有 cookie 的客户端如果继续访问，接管的其他 process 为了保持登陆态（比如拥有服务端定义的最新的 cookie 数据），可以事先通过某个事件同步 cookie，monitor 也一样接收。这样当 worker 被 fork() 后，拿到的将是跟其他 worker 一样的的 cookie 数据。</p>
<p>上述的 monitor 模型依赖 mnet 的多进程模型，虽然持有 listen fd，但是不处理 accept 事件，只有一个系统内的控制面 UDP 来传递数据，其他的工作，只是检查、拉起 worker process，状态相对稳定。</p>
<p>另外在 .mooc 配置文件上，透出来了多进程配置中的数据回调、发送函数，除了 <code>WORKER_ONLINE</code>、<code>WORKER_ROUTE</code>、<code>WOREKR_SESSION</code> 是保留事件外，其他的可以自行添加处理。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="2023-06.html#p1">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年6月11日 周日 11:49</div>
<h2>mnet 支持多进程模型</h2>
<p>mnet 目前还未原生支持多线程，比如在同一进程内持有所有 socket 列表，无法独立区分不同线程，反正把这个区分交给调用方来解决。</p>
<p>而对于 <a href="https://github.com/lalawue/m_net/tree/master/examples/process">mnet 多进程模型</a>，之前也无法区分，比如无法在不同进程 listen 同一个 fd。</p>
<p>当然现在可以了，是基于 Mac/Linux 的 fork() 和 waitpid() 等系统调用做的，Windows 下面没有实验，也不打算实验了。</p>
<p>上面链接的例子，是基于 Linux 的 fork() 系统调用，子进程可以访问父进程的所有资源，比如打开的 fd 等等，在代码方面，指针、fd 在 fork() 后看起来跟父进程是一摸一样的。</p>
<p>多进程模型下，fork() 出来的子进程会有多个，由于 event queue（epoll/kqueue）在内核中唯一，虽然子进程拥有该 event queue 的 fd，但实际上无法操作，验证得自己重新创建一条才行，所以子进程被 fork() 出来后，立即自己新建立一条 event queue，将之前拥有的 fd 都添加上去。</p>
<p>其次由于 listen fd 实际上也是父子进程都拥有的，在多条 event queue 中被监听，如果新的链接进来，其实只能 accept 一次，其余进入 accept 函数的实际上会 accept 失败，貌似较老版本的 Linux 会造成其他的问题，具体我也没有进一步地了解。这些是我从网上不知名博客搜到的，当时是想借鉴 nginx 的多进程模型的，就搜到了这个问题。</p>
<p>解决的办法是使用进程间锁，创建只有一个临界资源的 semaphore，子进程们在进入实际 accept 前，尝试独占该 accept 系统调用，如果尝试失败，将放弃此次 accept。该系统 API 在 Mac/Linux 下面的接口是一样的，</p>
<p>对于父进程，在这个多进程模型中，将上升为 monitor，并放弃对该 listen fd 的 accept，所以判断较为简单，不需要争夺关联 accept 的临界锁。因为多次 fork() 而拥有所有子进程的 pid，转而 waitpid()，在子进程崩溃后，可以重新 fork() 出新的子进程接着服务。</p>
<p>多进程模型相较于多线程，优势在于资源的隔离。进程之间通过操作系统的进程模型来隔离，子进程崩溃后还可以再次拉起来。劣势在于资源共享，如果子进程之间需要大量的资源同步和共享，因为都需要通过系统的 IPC，消耗会变大，而且也不方便。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="2023-06.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年5月13日 周六 13:14</div>
<h2>平价 Win11 4K 电脑</h2>
<p>大概 ¥800 左右的家用 Win11 4K 电脑，配件什么都是 2 手 PDD，毕竟有保修。</p>
<p>在 B 站上看了太多的相关评测，想着可以自己动手试下，之前就有想法将老家的几台电脑换成 Win11 4K，这里就给摸索一下，排一下雷。</p>
<ul>
<li>主板是二手的 GA-B85M-D3H，因为它有 2 条 PCIE，第二条为 PCIEx4</li>
<li>CPU 先用之前留下来的 i3-4170，后面换的 e3-2170v3</li>
<li>显卡先用 RX560，因为需要 2 台，后续估计会再买一块 RX580</li>
<li>使用 RX580 的这台电脑需要升级电源，二手长城 500W 足够了</li>
<li>内存本来预算都用 16G，后来发现基本办公的话 8G 就够了</li>
</ul>
<p>因为我还有旧的额外机箱，这个后面看看要不要换新吧，排雷期间可以先用旧的顶住。</p>
<p>以上配件搭配出来的电脑，目前价格大概 ¥800 左右，我预估跑 Win11 + 4k 的基本办公应该没啥问题吧。</p>
<p>另外在 D3H 的主页上面看不到第二条 PCIEx4 的版本，但即便是 PCIE 2.0，转接 NVME 后速度也有 1000MB+，虽说是 NVME PCIE 3.0 下的半速，但也要比 SATA 3.0 的 550M 或者 600M 快一倍，挺值的；另外还可以选一些直接支持 nvme 的寨板，也是办法，这里不做比较了。</p>
<p>大概花了几个晚上的业余时间，才装了好这台电脑，时间都花费上升级 BIOS、安装 Win11 上面了。</p>
<h3>升级老主板 BIOS 支持 NVME</h3>
<p>先是用闲置的 SSD 安装了 Win10 拉起系统，之后下载 GA 的 @BIOS 软件，读出本来就是最新版本 F4 的 bios.bin，然后用 MMTool 编辑 bios.bin，按照教程删除用不到的组件，再插入 <a href="https://github.com/VioSynthax/9343_NVME/tree/main">nvme 组件</a>。</p>
<p>当然如果你都用 U 盘升级 BIOS，而且有额外的电脑来操作的话，其实也不需要先用 SSD 安装 Win10 给这套主板拉起系统，我这么操作的原因，是想先用 Win10 验证一下这个二手主板再说。</p>
<p>和所有按照教程操作的博主一样，我也遇到了 MMTool 在 Win10 和 Win11 下面的 UI 显示问题，部分按钮被遮挡了，无法删除组件、插入组件。</p>
<p>按照某个 B 站视频介绍的方法，下载 Resoureces 软件修改 .exe，视频介绍的是修改字体，但仅仅这样作是不够的，我是继续调整了几个展示区域的大小。</p>
<p>BIOS 升级成功后，启动认出了 NVME，显示为 PATA:SS，顺利当上了启动盘，那可以拔掉之前的 Win10 SSD 了。</p>
<h3>安装 Win11</h3>
<p>然后继续使用之前的 U 盘安装 Win10 到 NVME。本来想在 Win10 上一步到位直接升级到 Win11 的，结果 ISO 解压缩后本地点击 setup.exe 升级，等了半天提示失败，说硬件不支持。不大明白之前 B 站博主在 775 主板上面是怎么从 Win10 setup.exe 升级到 Win11 的。</p>
<p>后来按照鲁大师介绍的方法来操作，需要使用 U 盘安装，这样就只能重新安装了。</p>
<p>试了一下，i3-4170 + RX560 鲁大师跑分 30 多万，开 Edge 播放 B 站 4K 视频有点卡，特别是从小窗打开放到到全屏这个操作，其他基本勉勉强强，搞得我有点心慌。</p>
<p>换成 e3-2170v3 后，鲁大师跑分 40 多万，CPU 分数提升其实没有很多，但看 B 站 4K 不卡了，就系统启动时候 CPU 占用有点高，大概有 70% ～ 80%，后面稳定在 15% 左右，看视频、刷网页大概半个小时，感觉基本的办公需求应该挺挺顺畅的，而且内存占用也不高。</p>
<p>原本我预计是要使用 16G 内存的，现在觉得 8G 应该够了。我还试了一下 4G，系统虽然能启动，但一上来就用了 2.5G，随便开几个网页就 3G 多了，罢了罢了。</p>
<p>那先给家里人配置这套 Win11 + 4k 组合，如果后续系统升级，或者软件吃紧，应该会选择全套替换，毕竟这个 CPU 已经是主板配置的顶天了，到时再看看有什么可选吧。</p>
<div class="category"><a href="CategoryLife.html">CategoryLife</a> / <a href="2023-05.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年4月9日 周日 12:09</div>
<h2>给 NAS 辅助机器升级</h2>
<p>电脑总是要更新的，主板平台升级之后，旧的机箱、主板、CPU 就沦为了其实不常开机的所谓 NAS 辅助机。作为大差不差的家用网络服务器，SMB 一定是要配置的，即便是机器不常开机。虽然不常开机，但是配置也得搞好不是，毕竟偶尔救急，或者要实验一些奇怪想法的时候，这台机器可是绝好的实验场所。毕竟有好几个数据盘，而系统盘是独立的，这样系统可以随便搞，坏了重装就是，再说也没那么容易坏。</p>
<p>上次升级 RX580 之后，好早之前的一条 GTX1060 就落下了（如今版本的苹果不支持 RTX 显卡了），就一并给装到这台 NAS 辅助机上。除此外，原有的搭载的技嘉 B85M 主板，支持的是 LGA1150 针脚的 CPU。</p>
<p>主板状况还很好，灰都不多，原来的 CPU 是 i3-4150，属实有点烂了，SSH 登陆上去，链接都觉得慢。在 PDD 上买了 E3-1271v3，4 核 8 线程。内存原来就有 16G 的 1600，现在内存那么便宜，再给加到 32G。算下来升级的钱也不到 ￥300，怕原来的 CPU 下压式风扇顶不住，给搞了 4 热管的塔式风扇，要 ￥30+ 呢。</p>
<p>各项准备好之后，拆机折腾吧（虽然已经拆过无数遍，螺丝都有点滑丝了）：</p>
<ul>
<li>给技嘉 B85 的主板升级 BIOS</li>
<li>拆掉原来的下压式 CPU 风扇</li>
<li>拆掉 CPU</li>
<li>安装 CPU，涂散热硅脂</li>
<li>安装塔式 CPU 风扇</li>
<li>安装内存</li>
<li>安装显卡</li>
</ul>
<p>这里因为机箱是 M-ATX，所以一般的塔式 CPU 风扇能支持，没啥问题，如果是更小的机箱，就得考虑用不了普通的塔式机箱，而得使用下压式 CPU 风扇了。</p>
<p>给技嘉主板升级 BIOS 得做好心理准备，国内技嘉网站可能下不到所需要的 BIOS，而得开梯子到其台湾网站上下载，台湾网站上能搜到的主板 BIOS 要比其大陆网站多多了。</p>
<p>为啥现在的散热硅脂那么稀，而且只送了那么一点，好多年前的硅脂，多到溢出为止，不大习惯。</p>
<p>其实一开始我的拆装顺序不对，BIOS 没升级，显卡没插，而新 CPU 是不带核显的，要不怎么会这么便宜。</p>
<p>反正最后一通折腾下来，顺利点亮跑起来了，SSH 上去，嘿，这链接的速度真的快，git clone 了一个不算小的 C++ 工程，make -j8 对比了一下之前的 i3，时间少了一半多，看了下 CPU 温度，挺低的。</p>
<p>那就先这样吧。</p>
<div class="category"><a href="CategoryLinux.html">CategoryLinux</a> / <a href="2023-04.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年3月18日 周六 13:26</div>
<h2>Mac 下关闭 Edge 右上角发现按钮</h2>
<h3>1.创建描述文件</h3>
<p>保存下面的文件为 microsoflt.edge.mobileconfig</p>
<pre><code class="language-sh">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
	&lt;key&gt;PayloadDisplayName&lt;/key&gt;
	&lt;string&gt;Microsoft Edge Policy&lt;/string&gt;
	&lt;key&gt;PayloadIdentifier&lt;/key&gt;
	&lt;string&gt;com.example.edge-sensible&lt;/string&gt;
	&lt;key&gt;PayloadType&lt;/key&gt;
	&lt;string&gt;Configuration&lt;/string&gt;
	&lt;key&gt;PayloadUUID&lt;/key&gt;
	&lt;string&gt;6BAC9A8B-19F3-4876-99D9-BCA6C8B30238&lt;/string&gt;
	&lt;key&gt;PayloadVersion&lt;/key&gt;
	&lt;integer&gt;1&lt;/integer&gt;
	&lt;key&gt;TargetDeviceType&lt;/key&gt;
	&lt;integer&gt;5&lt;/integer&gt;
	&lt;key&gt;PayloadContent&lt;/key&gt;
	&lt;dict&gt;
		&lt;key&gt;PayloadDisplayName&lt;/key&gt;
		&lt;string&gt;Microsoft Edge Policy&lt;/string&gt;
		&lt;key&gt;PayloadIdentifier&lt;/key&gt;
		&lt;string&gt;com.microsoft.Edge.13D4EE1D-74BF-4963-AE69-88E61F9FD9EA&lt;/string&gt;
		&lt;key&gt;PayloadType&lt;/key&gt;
		&lt;string&gt;com.microsoft.Edge&lt;/string&gt;
		&lt;key&gt;PayloadUUID&lt;/key&gt;
		&lt;string&gt;9FCEF286-C20B-4708-A8C0-FB728C75B677&lt;/string&gt;
		&lt;key&gt;PayloadVersion&lt;/key&gt;
		&lt;integer&gt;1&lt;/integer&gt;
		&lt;key&gt;HubsSidebarEnabled&lt;/key&gt;
		&lt;false/&gt;
		&lt;key&gt;DiagnosticData&lt;/key&gt;
		&lt;integer&gt;0&lt;/integer&gt;
		&lt;key&gt;EdgeCollectionsEnabled&lt;/key&gt;
		&lt;false/&gt;
		&lt;key&gt;EdgeShoppingAssistantEnabled&lt;/key&gt;
		&lt;false/&gt;
		&lt;key&gt;PersonalizationReportingEnabled&lt;/key&gt;
		&lt;false/&gt;
		&lt;key&gt;ShowMicrosoftRewards&lt;/key&gt;
		&lt;false/&gt;
	&lt;/dict&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre>
<h3>2.加载描述文件</h3>
<p>在系统偏好设置 -&gt; 描述文件，点击 <code>+</code> 添加这个描述文件</p>
<h3>3.在 Edge 浏览器里面启用策略</h3>
<p>在 Edge 地址栏里面输入 <code>edge://policy/</code>，点击重新加载策略，就可以看到效果</p>
<p>--</p>
<p>教程在这里 <a href="https://zhuanlan.zhihu.com/p/614089321">https://zhuanlan.zhihu.com/p/614089321</a>，只不过上面的描述文件需要删掉注释。</p>
<div class="category"><a href="CategoryLinux.html">CategoryLinux</a> / <a href="2023-03.html#p3">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年3月17日 周五 22:27</div>
<h2>买了一个 RX580 2304SP 矿卡</h2>
<p>PDD 淘了一张矿难迪兰 RX580 8G 2304SP，Hacktonish 免驱一次点亮了，拆机装机不到 20 分钟，原来的亮机卡 RX560 4G 虽然支持 4K，但在 B 站 4K 以及大量弹幕下，感觉有点吃力，没过多久风扇就开始呼呼的。</p>
<p>在这之前做了不少功课，首先只是想升级一下原来的 RX560，毕竟原来的也不是不能用，就是风扇有点吵而已，所以价格嘛要压住。</p>
<p>然后是要免驱，要不升级系统后就很麻烦，而苹果是很规律的一年一升级。我之前就有一张 GTX 1060，但是随着系统升级，渐渐用不了了，记得最开始还能用 NV 的 WebDriver 的。</p>
<p>另外其实 PDD 还有挺多的是 RX590，完全版也能免驱，完全版指的是非 GME 的版本。对应之下 RX580 的完全版是 2304SP，一般的都是 2048SP。看评测实际运行起来后，两者差别不大，但 RX590 的价格是真上去了，要 45x，而 RX580 的价格，我买了之后还一直在跌。</p>
<p>我其实要求简单，4K 稳稳压住就好了，最后是 28x 买下的，店家说店保 2 年，感觉这个价格还是挺香的。</p>
<p>另外 RX580、RX590 的非完全版也不是不能用，需要自己刷相应的 BIOS，伪装成完全版，貌似要在 Win 下操作，对我来说这个条件不大好搞，所以就一心想要完全版的，价格限制下，RX580 2304SP 就香起来了。</p>
<p>现在稳定运行 3 天了，大部分情况下风扇声音很轻几乎听不见，是优势；劣势是跑了几个小时后，感觉温度其实挺高的。然后我压测了一下，风扇全力运转后的声音是真的大，像个风箱一样，但这种情况不大容易遇到吧。</p>
<p>不管这么说，这个价格下，大部分的情况下很不错的，可喜可贺，😁</p>
<div class="category"><a href="CategoryLife.html">CategoryLife</a> / <a href="2023-03.html#p2">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年3月4日 周六 21:34</div>
<h2>WSL2 under Win11 22H2</h2>
<p>玩起了 Win11，搞的是 Ubuntu-18.04 LTS，其实 Ubuntu 的版本对我来说不是那么重要，之所以选 18.04 因为其他虚拟机上面用的也是这个版本，而不同版本的 glibc 库不同，会导致同一个程序编译后在其他虚拟机上面跑不了，为了避免这个麻烦，就都用同一套吧，要升级就一起升级。</p>
<p>另外 WSL2 不再依赖系统功能里面的 Linux 子系统组件，而是提供了一个<a href="https://link.zhihu.com/?target=https%3A//github.com/microsoft/WSL/releases">单独的更新包</a>，这个 URL 是固定的，下载后更新，可以解决 WSL 下面固定 IP 地址的难题。</p>
<p>安装完成后，WSL 版本是 1.0 以上，比如我的：</p>
<pre><code class="language-sh">&gt; wsl --version
WSL 版本： 1.1.3.0
...
</code></pre>
<p>首先建立一个虚拟交换机：</p>
<ul>
<li>Win-S 打开搜索面板，搜索 Hyper-V 管理器，点击并打开右侧的虚拟交换机管理器</li>
<li>右侧建立一个绑定到物理设备的虚拟交换机，比如可以用无线网卡绑定一个 WSLBridge</li>
<li>注意不要操作已有的 WSL 虚拟交换机，那个是原来的</li>
</ul>
<p>我们刚创建的 WSLBridge 虚拟交换机，分配地址是外部物理网络的 DHCP，接着我们指定 Ubuntu-18.04 使用刚建立的虚拟交换机做桥接设备，Powershell 下面在用户目录下（%USERPROFILE%目录下）创建 .wslconfig，内容是下面</p>
<pre><code class="language-sh">[wsl2]
networkingMode=bridged # 桥接模式
vmSwitch=WSLBridge # 你想使用的网卡
ipv6=true # 启用 IPv6
</code></pre>
<p>这样 Ubuntu-18.04 虚拟机的 IP 地址就固定了（由外部路由分配）。</p>
<p>访问 WSL 上的 Ubuntu 18.04 还挺方便，文件管理器地址栏上面输入 <code>\\wsl$</code> 就能访问 Linux 系统的 <code>\</code> 目录，可太方便了。</p>
<p>虽然我的是家庭版 Win11 22H2，但并不妨碍我使用 WSL，之前网上找的一个脚本，保存内容为 xx.cmd 并以管理员权限运行，就能获得 WSL 的能力。</p>
<pre><code class="language-bash">pushd &quot;%~dp0&quot;
dir /b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txt
for /f %%i in ('findstr /i . hyper-v.txt 2^&gt;nul') do dism /online /norestart /add-package:&quot;%SystemRoot%\servicing\Packages\%%i&quot;
del hyper-v.txt
Dism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL
</code></pre>
<p>不过我后面改成从 github 上下载更新了，去掉了 Windows 系统功能里面的 Linux 子系统的钩，不知道这个还有没有影响。</p>
<p>不管了，先玩着吧，😊</p>
<div class="category"><a href="CategoryLinux.html">CategoryLinux</a> / <a href="2023-03.html#p1">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年3月4日 周六 20:12</div>
<h2>再读《三体》</h2>
<p>记得应该是大学的时候读过三体的黑暗森林，第一第二部吧，反正我不记得程心，但实际读完后，程心出场到后面的好多内容，也是相当震撼的。</p>
<p>最震撼的应该是 “只送大脑” 了。</p>
<p>这个伏笔要到挺后面才揭开，不过虽然大脑很努力，也无法解救重重迷雾中的人类，该吃吃、该喝喝、该打打、该沙沙，其实吧，对于掌握了二向箔的其他文明来说，人类这段时间的发展其实是很有限的。</p>
<p>宇宙何其广大，我们也仅仅是穷其一生来了解它，有时候掌握的规律，不只是救人的灵丹妙药，更是歼敌的致命武器，四维空间的泡泡是这样的，远看毫无威胁的二向箔也是的。</p>
<p>而暴露行踪的曲率引擎，希望有生之年能够飞出太阳系吧，😁</p>
<div class="category"><a href="CategoryReading.html">CategoryReading</a> / <a href="2023-03.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年2月12日 周日 23:24</div>
<h2>将驾驶证转入深圳</h2>
<p>春节返乡，发现驾驶证快到期了，但春节期间老家的车管所也放假，也有点担心在老家的车管所续签会不会花费比较多的时间，比如排队什么的。</p>
<p>查了一下将驾驶证转入深圳，特别是知乎上面的长文介绍，发现转入深圳其实很简单的，反正自己长期在深圳，不如就转过来吧。</p>
<p>说一下异地转入深圳吧，整个流程都自动化了，比如体检的几个环节，都是在大厅里面一个封闭的体检箱里面完成的，大厅里面这样的体检箱有好多个，平时如果人不多，几乎不用排队。</p>
<p>整个体检过程也比较顺利，都有视频、语音提示，虽然一开始有点笨手笨脚的没立即理解跟上，因为不同的测试项目需要配合一些道具（比如测试视力需要用板子遮眼），但是上面没有立即通过的地方会标红色，重新测一遍相关项就好了。</p>
<p>对了，拍照可以在体检箱里面完成，如果出了体检箱，就得单独花 ¥10 来拍照了。</p>
<p>然后大概等了十几、二十分钟，体检结果出来了，可以在任何一台体检箱外面打印。</p>
<p>拿到了体检报告，下一个环节就是打印驾驶证了，感觉体检报告这个出来只是给自己看一下而已，毕竟体检结果都要在线审核的，都联网了。</p>
<p>打印驾驶证之前，还会要求回收旧的驾驶证，新的驾驶证打印出来后，还热乎的，要凉一下，要不太烫手了。</p>
<p>体检 ¥45，照片 ¥10，新的驾驶证、皮套工本费 ¥10，整个流程大概 30 ～ 40 分钟吧，真的快。</p>
<div class="category"><a href="CategoryLife.html">CategoryLife</a> / <a href="2023-02.html#p0">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>

<div class="date">23年1月28日 周六 22:47</div>
<h2>VSCode 的 'Remote - SSH'</h2>
<p>春节带了 T450 回家，但实际是使用虚拟机来调试代码的，代码里面的头文件啥的都是 Linux 那边的路径，如果用 Win 下的 VSCode 打开工程，是找不到相关头文件，仅有报错的。</p>
<p>这个时候安装上 ‘Remote - SSH’ 扩展，就可以通过 SSH 协议访问虚拟机里面的工程，头文件路径啥的都是正确的，跟在 Linux 桌面打开工程是一样的。</p>
<p>这得益于 VSCode 的 C/S 架构，只要在支持 SSHD 的服务器上安装上 VSCode 的 server 端，以及相关 server 端的插件，就能够支持访问 server 端用户权限下的文件、工程。</p>
<p>虽然在 T450 上，虚拟机 + SSH 确实会慢一些，但有 LSP 的支持总要比没有良好编译环境的 Windows 要好吧。</p>
<p>对了，如果还装了 SSHFS-Win 这样的组合，要避免 SSHFS 使用的 ssh.exe 跟扩展使用的 ssh.exe 混用，以及扩展使用的 <code>.ssh/config</code> 文件，可以选择创建在 <code>AppData</code> 目录下的那个，要不会导致 SSHFS-Win 创建目录链接失败。</p>
<div class="category"><a href="CategoryProgramming.html">CategoryProgramming</a> / <a href="2023-01.html#p2">Permalink</a> / <a href="https://github.com/lalawue/homepage/discussions/categories/blog" target="_blank">Discussion</a></div>
<!-- Page published by cmark-gfm ends here -->
  <div id="foot">2004-<script>var d = new
	Date();document.write(d.getFullYear())</script> &copy;
	Sucha. Powered by MarkdownProjectCompositor.
  </div>
  </div><!-- text -->
  <div id="sidebar">
  </div><!-- sidebar -->
  <script src="../js/prism.min.js" async="async"></script>
  <script src="../js/blog_sidebar.js"></script>
  </div> <!-- body -->
</body>
</html>